import { cookies } from "next/headers";

export const GET = async ({
    params,
    req,
}:{
    params: { id_tesis: string },
    req: Request,
}) => {
    //const { searchParams } = new URL(req.url);
    //const idTesis = searchParams.get('id');
    //const idTesis = parseId(params.id_tesis);
    //if( !idTesis ){
    //    return new Response('Faltan parametros', { status: 404 } );
    //}

    const cookieStore = cookies();
    const token = cookieStore.get('authToken')?.value || '';

    const response = await fetch('http://localhost/api/repositorio_tesis/tesis/download_pdf.php?id_tesis=1',{
        headers:{
            'Authorization': `Bearer ${token}`,
        },
        credentials: 'include',
    });

    return new Response( response.body, {
        headers: {
            ...response.headers,
            'content-disposition': `attachment; filename=tesis_${1}.pdf`,
        },
    });

};
